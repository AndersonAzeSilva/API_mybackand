const express = require('express'); //Importa o módulo express
const mysql = require('mysql2'); //importando a biblioteca de conexão do Mysql

const app = express(); //Cria uma instância do express
const port = 3000; //Porta do servidor

///////////////////////////////////////////////////////////////////////////////////////////////
// Configuração da conexão com o banco de dados
///////////////////////////////////////////////////////////////////////////////////////////////
const db = mysql.createConnection({
  host: 'localhost', //nome do local do banco de dados
  user: 'root', //nome de usuário do banco de dados
  password: '', //senha do banco de dados
  database: 'appvozativa' //nome do banco de dados
});

db.connect((err) => {
///////////////////////////////////////////////////////////////////////////////////////////////
//Exibindo a mensagem de erro caso não consiga se conectar com o banco de dados
///////////////////////////////////////////////////////////////////////////////////////////////
  if (err) {
    console.error('Erro ao conectar no banco de dados: ', err);
    return;
  }
///////////////////////////////////////////////////////////////////////////////////////////////
//Exibindo a mensagem de conexão realizada com sucesso
///////////////////////////////////////////////////////////////////////////////////////////////
  console.log('Conexão com o banco de dados estabelecida com sucesso.');
});
///////////////////////////////////////////////////////////////////////////////////////////////
// Rota para obter dados
///////////////////////////////////////////////////////////////////////////////////////////////
app.get('/dados', (req, res) => {
  db.query('SELECT * FROM tabela', (err, results) => {
    if (err) throw err;
    res.json(results);
  });
});
////////////////////////////////////////////////////////////////////////////////////////////////
//Inicialização do Servidor
///////////////////////////////////////////////////////////////////////////////////////////////
app.listen(port, () => {
  console.log(`Conexão com o Servidor estabelecida com sucesso na porta: ${port}`); //Exibe a mensagem de Servidor rodando
});
///////////////////////////////////////////////////////////////////////////////////////////////